exports.id=513,exports.ids=[513],exports.modules={97552:(e,t,r)=>{Promise.resolve().then(r.bind(r,8633)),Promise.resolve().then(r.bind(r,99833)),Promise.resolve().then(r.bind(r,55374)),Promise.resolve().then(r.bind(r,69638))},40811:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},8633:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(10326),s=r(90434),o=r(35047);let i=[{title:"Executive",items:[{href:"/executive",label:"Command Brief",icon:"briefcase"}]},{title:"Operations",items:[{href:"/operations/dashboard",label:"Dashboard",icon:"grid"},{href:"/operations/queue",label:"Work Queue",icon:"queue"}]},{title:"Governance",items:[{href:"/governance/incidents",label:"Incidents",icon:"alert"},{href:"/governance/controls",label:"Controls",icon:"shield"}]}];function a({type:e}){switch(e){case"briefcase":return n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})});case"grid":return n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})});case"queue":return n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})});case"alert":return n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"shield":return n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})});default:return n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:2})})}}function l(){let e=(0,o.usePathname)();return(0,n.jsxs)("aside",{className:"w-56 bg-white border-r border-gray-200 flex flex-col min-h-screen shrink-0",children:[n.jsx("div",{className:"px-5 py-5 border-b border-gray-200",children:(0,n.jsxs)(s.default,{href:"/executive",className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center",children:n.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),n.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:"SchoolZone"})]})}),n.jsx("nav",{className:"flex-1 px-3 py-3 space-y-4 overflow-y-auto",children:i.map(t=>(0,n.jsxs)("div",{children:[n.jsx("p",{className:"px-3 mb-1 text-[10px] font-semibold text-gray-400 uppercase tracking-wider",children:t.title}),n.jsx("div",{className:"space-y-0.5",children:t.items.map(t=>{var r;let o="/executive"===(r=t.href)?"/executive"===e||e.startsWith("/executive/"):e===r||e.startsWith(r+"/");return(0,n.jsxs)(s.default,{href:t.href,className:`flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${o?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[n.jsx(a,{type:t.icon}),t.label]},t.href)})})]},t.title))}),(0,n.jsxs)("div",{className:"px-3 py-3 border-t border-gray-200",children:[(0,n.jsxs)(s.default,{href:"/settings",className:`flex items-center gap-2.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${"/settings"===e?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[(0,n.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Settings"]}),n.jsx("p",{className:"px-3 mt-2 text-[10px] text-gray-400",children:"Digital Twin v2.0"})]})]})}},99833:(e,t,r)=>{"use strict";r.d(t,{ToastProvider:()=>l,p:()=>i});var n=r(10326),s=r(17577);let o=(0,s.createContext)({toast:()=>{}});function i(){return(0,s.useContext)(o)}let a=0;function l({children:e}){let[t,r]=(0,s.useState)([]),i=(0,s.useCallback)((e,t="info")=>{let n=++a;r(r=>[...r,{id:n,text:e,type:t}]),setTimeout(()=>{r(e=>e.filter(e=>e.id!==n))},3e3)},[]);return(0,n.jsxs)(o.Provider,{value:{toast:i},children:[e,n.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(e=>n.jsx(c,{message:e,onDismiss:()=>r(t=>t.filter(t=>t.id!==e.id))},e.id))})]})}function c({message:e,onDismiss:t}){let r="success"===e.type?"bg-green-50 border-green-200 text-green-800":"error"===e.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800";return(0,n.jsxs)("div",{className:`flex items-center gap-2 px-4 py-2.5 rounded-lg border shadow-sm text-sm animate-in slide-in-from-right ${r}`,children:[n.jsx("span",{className:"flex-1",children:e.text}),n.jsx("button",{onClick:t,className:"opacity-60 hover:opacity-100 text-xs",children:"âœ•"})]})}},69638:(e,t,r)=>{"use strict";r.d(t,{LiveStateProvider:()=>p,j:()=>h});var n=r(10326),s=r(17577),o=r(42771),i=r(32056),a=r(2545),l=r(29771),c=r(55374);let u=new Set(["LOW","MED","HIGH"]);function d(e,t){for(let t of e)l.vU(`Validation: ${t}`);return(0,a.sv)(),{valid:!1,errors:e,warnings:t}}let m=(0,s.createContext)({liveState:null,loading:!0,error:null,lastValidation:null,applyDemo:()=>{}});function h(){return(0,s.useContext)(m)}function p({children:e}){let{config:t}=(0,c.c)(),[r,h]=(0,s.useState)(null),[p,v]=(0,s.useState)(null),[f,x]=(0,s.useState)(!0),[g,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(null);(0,s.useRef)(o.pr.INITIAL);let _=(0,s.useRef)(null);(0,s.useCallback)(async(e,t,r)=>{_.current?.abort();let n=new AbortController;_.current=n;try{let s=function(e){switch(e){case o.pr.INITIAL:case o.pr.SNAPSHOT_1:return"live_state_1.json";case o.pr.SNAPSHOT_2:return"live_state_2.json"}}(e),c=await (0,i.SE)(s,t,n.signal);if(n.signal.aborted)return;if(c){if(r){let e=function(e){let t=[],r=[];if(!e||"object"!=typeof e)return t.push("LiveState must be a non-null object"),d(t,r);if(("string"!=typeof e.snapshot_id||0===e.snapshot_id.length)&&t.push("snapshot_id must be a non-empty string"),("string"!=typeof e.timestamp||0===e.timestamp.length)&&t.push("timestamp must be a non-empty string"),"string"==typeof e.district_risk&&u.has(e.district_risk)||t.push(`district_risk must be one of LOW, MED, HIGH; got "${e.district_risk}"`),("number"!=typeof e.active_alerts||e.active_alerts<0)&&t.push("active_alerts must be a non-negative number"),"number"!=typeof e.avg_latency_ms&&t.push("avg_latency_ms must be a number"),"number"!=typeof e.camera_health_pct&&t.push("camera_health_pct must be a number"),"number"!=typeof e.forecast_horizon_min&&t.push("forecast_horizon_min must be a number"),Array.isArray(e.zones))for(let r=0;r<e.zones.length;r++){let n=function(e,t){let r=[],n=`zones[${t}]`;return e&&"object"==typeof e?(("string"!=typeof e.zone_id||0===e.zone_id.length)&&r.push(`${n}.zone_id must be a non-empty string`),("string"!=typeof e.name||0===e.name.length)&&r.push(`${n}.name must be a non-empty string`),"string"==typeof e.risk_level&&u.has(e.risk_level)||r.push(`${n}.risk_level invalid`),("number"!=typeof e.risk_score||e.risk_score<0||e.risk_score>1)&&r.push(`${n}.risk_score must be 0..1`),Array.isArray(e.forecast_30m)||r.push(`${n}.forecast_30m must be an array`),Array.isArray(e.recommendations)||r.push(`${n}.recommendations must be an array`),Array.isArray(e.events)||r.push(`${n}.events must be an array`),Array.isArray(e.interventions)||r.push(`${n}.interventions must be an array`)):r.push(`${n} must be a non-null object`),r}(e.zones[r],r);t.push(...n)}else t.push("zones must be an array");return t.length>0?d(t,r):(e.avg_latency_ms>200&&r.push(`High latency: ${e.avg_latency_ms}ms`),e.camera_health_pct<90&&r.push(`Low camera health: ${e.camera_health_pct}%`),{valid:!0,errors:[],warnings:r})}(c);j(e),e.valid||l.ZK("Snapshot validation failed",e.errors)}h(c),b(null),(0,a.vP)()}else b("Demo Data Unavailable")}catch(e){"AbortError"!==e.name&&b("Demo Data Unavailable")}finally{x(!1)}},[]);let S=(0,s.useCallback)((e,n)=>{if(!t.demoMutationEnabled){l.um("Demo mutation disabled, ignoring apply");return}let s=p??r;s&&v(function(e,t,r){let n=new Date,s=[String(n.getUTCHours()).padStart(2,"0"),String(n.getUTCMinutes()).padStart(2,"0"),String(n.getUTCSeconds()).padStart(2,"0")].join(":"),o={id:`demo-int-${Date.now()}`,action:r.action,applied_at:s,status:"active"},i={time:s,type:"intervention",detail:`[Demo] Applied: ${r.action}`},c=e.zones.map(e=>e.zone_id!==t?e:{...e,interventions:[...e.interventions,o],events:[...e.events,i]});return(0,a.L8)(),l.um(`Demo intervention applied: ${r.action} in ${t}`),{...e,zones:c}}(s,e,n))},[p,r,t.demoMutationEnabled]),k=(0,s.useMemo)(()=>r?function(e,t){if(!t)return e;let r=new Map;for(let e of t.zones)r.set(e.zone_id,e);let n=e.zones.map(e=>{let t=r.get(e.zone_id);if(!t)return e;let n=t.interventions.filter(e=>e.id.startsWith("demo-int-")),s=t.events.filter(e=>e.detail.startsWith("[Demo]"));return 0===n.length&&0===s.length?e:{...e,interventions:[...e.interventions,...n],events:[...e.events,...s]}});return{...e,zones:n}}(r,p):null,[r,p]),w=(0,s.useMemo)(()=>({liveState:k,loading:f,error:g,lastValidation:y,applyDemo:S}),[k,f,g,y,S]);return n.jsx(m.Provider,{value:w,children:e})}},32056:(e,t,r)=>{"use strict";r.d(t,{SE:()=>i});var n=r(55374),s=r(29771),o=r(2545);async function i(e,t="normal",r){let i=performance.now();try{let a=await fetch(`${(0,n.f)(t)}/${e}`,{signal:r});if(!a.ok)throw Error(`Failed to load live state: ${a.status}`);let l=await a.json();return(0,o._h)(performance.now()-i,!0),s.um(`Loaded snapshot ${e} (${t})`),l}catch(e){return"AbortError"!==e.name&&(s.vU("loadLiveState failed",e),(0,o._h)(performance.now()-i,!1)),null}}},55374:(e,t,r)=>{"use strict";r.d(t,{DemoConfigProvider:()=>l,c:()=>a,f:()=>c});var n=r(10326),s=r(17577);let o={scenario:"normal",snapshotIntervalMs:5e3,timeMode:"live",demoMutationEnabled:!0,runtimeValidationEnabled:!0},i=(0,s.createContext)({config:o,updateConfig:()=>{}});function a(){return(0,s.useContext)(i)}function l({children:e}){let[t,r]=(0,s.useState)(o),a=(0,s.useCallback)(e=>{r(t=>({...t,...e}))},[]);return n.jsx(i.Provider,{value:{config:t,updateConfig:a},children:e})}function c(e){return`/mock/scenarios/${e}`}},29771:(e,t,r)=>{"use strict";r.d(t,{AF:()=>c,ZK:()=>a,um:()=>i,vU:()=>l});let n=[];function s(){return new Date().toISOString()}function o(e){n.push(e),n.length>200&&n.shift()}function i(e,t){o({level:"info",timestamp:s(),message:e,data:t})}function a(e,t){o({level:"warn",timestamp:s(),message:e,data:t})}function l(e,t){o({level:"error",timestamp:s(),message:e,data:t})}function c(){return n}},2545:(e,t,r)=>{"use strict";r.d(t,{Kt:()=>l,L8:()=>i,_h:()=>s,sv:()=>a,vP:()=>o});let n={fetchCount:0,fetchErrorCount:0,lastFetchMs:0,lastFetchAt:null,snapshotRotations:0,demoMutationsApplied:0,validationFailures:0};function s(e,t){n.fetchCount++,n.lastFetchMs=e,n.lastFetchAt=new Date().toISOString(),!t&&n.fetchErrorCount++}function o(){n.snapshotRotations++}function i(){n.demoMutationsApplied++}function a(){n.validationFailures++}function l(){return{...n}}},42771:(e,t,r)=>{"use strict";var n,s;r.d(t,{pr:()=>s,rN:()=>n}),function(e){e.LOW="LOW",e.MED="MED",e.HIGH="HIGH"}(n||(n={})),function(e){e.INITIAL="INITIAL",e.SNAPSHOT_1="SNAPSHOT_1",e.SNAPSHOT_2="SNAPSHOT_2"}(s||(s={}))},37698:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>d});var n=r(19510),s=r(85384),o=r.n(s);r(67272);var i=r(68570);let a=(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/components/Sidebar.tsx#default`);(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/lib/demoConfig.tsx#useDemoConfig`);let l=(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/lib/demoConfig.tsx#DemoConfigProvider`);(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/lib/demoConfig.tsx#scenarioBasePath`),(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/lib/LiveStateProvider.tsx#useLiveStateContext`);let c=(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/lib/LiveStateProvider.tsx#LiveStateProvider`);(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/components/Toast.tsx#useToast`);let u=(0,i.createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/components/Toast.tsx#ToastProvider`),d={title:"SchoolZone Digital Twin",description:"School Zone Digital Twin Operations Console"};function m({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:`${o().className} antialiased`,children:n.jsx(l,{children:n.jsx(c,{children:n.jsx(u,{children:(0,n.jsxs)("div",{className:"flex min-h-screen",children:[n.jsx(a,{}),n.jsx("main",{className:"flex-1 bg-gray-50 min-w-0",children:e})]})})})})})})}},67272:()=>{}};