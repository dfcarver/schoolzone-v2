(()=>{var e={};e.id=942,e.ids=[942],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84542:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),s(72946),s(37698),s(35866);var r=s(23191),n=s(88716),a=s(37922),i=s.n(a),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["executive",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,72946)),"/Users/dc/Documents/projects/schoolzone/app/executive/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,37698)),"/Users/dc/Documents/projects/schoolzone/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/dc/Documents/projects/schoolzone/app/executive/page.tsx"],x="/executive/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/executive/page",pathname:"/executive",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63359:(e,t,s)=>{Promise.resolve().then(s.bind(s,61502))},61502:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(10326),n=s(17577),a=s(64780),i=s(83036);let l={GREEN:{border:"border-green-300",dot:"bg-green-500"},AMBER:{border:"border-amber-300",dot:"bg-amber-500"},RED:{border:"border-red-400",dot:"bg-red-500"}};function d({label:e,value:t,subtitle:s,governanceStatus:n}){let a=n?l[n]:{border:"border-gray-200",dot:"bg-blue-500"};return(0,r.jsxs)("div",{className:`bg-white rounded-lg border ${a.border} px-5 py-4 flex flex-col gap-1`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${a.dot}`}),r.jsx("span",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider",children:e})]}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:t}),s&&r.jsx("span",{className:"text-xs text-gray-500",children:s})]})}var o=s(35047);function c({entries:e,linkPrefix:t="/executive/zones"}){let[s,a]=(0,n.useState)("NOW"),i=(0,o.useRouter)();return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Portfolio Heatmap"}),r.jsx("div",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-0.5",children:["NOW","+15","+30"].map(e=>r.jsx("button",{onClick:()=>a(e),className:`text-xs font-medium px-3 py-1 rounded-md transition-colors ${s===e?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e},e))})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:e.map(e=>{let n=function(e){switch(s){case"NOW":return e.riskNow;case"+15":return e.risk15;case"+30":return e.risk30}}(e);return(0,r.jsxs)("button",{onClick:()=>i.push(`${t}/${e.zone_id}`),className:`text-left border rounded-lg p-3 hover:shadow-md transition-shadow cursor-pointer ${n>=60?"bg-red-50 border-red-200":n>=40?"bg-amber-50 border-amber-200":"bg-green-50 border-green-200"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),r.jsx("span",{className:`w-3 h-3 rounded-full ${n>=60?"bg-red-500":n>=40?"bg-amber-400":"bg-green-500"}`})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[n,"%"]}),(0,r.jsxs)("div",{className:"text-[10px] text-gray-500 uppercase mt-1",children:["Risk ","NOW"===s?"Now":`at ${s} min`]})]},e.zone_id)})})]})}function x({liveState:e}){let t=e.zones.filter(e=>e.interventions.length>0).sort((e,t)=>t.interventions.length-e.interventions.length)[0];if(!t)return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Impact Analysis"}),r.jsx("p",{className:"text-sm text-gray-400",children:"No interventions applied yet to measure impact."})]});let s=Math.round(100*t.forecast_30m.reduce((e,t)=>t.risk>e?t.risk:e,0)),n=Math.round(100*t.risk_score),a=s-n,i=Math.round(t.vehicle_count/Math.max(t.speed_avg_mph,1)*3),l=Math.round(n/Math.max(s,1)*i);return(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Impact Analysis"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mb-4",children:[t.name," — ",t.interventions.length," intervention",1!==t.interventions.length?"s":""," applied"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider mb-3",children:"Risk Score"}),(0,r.jsxs)("div",{className:"flex items-end gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-red-500",children:[s,"%"]}),r.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:"Before"})]}),r.jsx("div",{className:"text-gray-300 text-lg pb-1",children:"→"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[n,"%"]}),r.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:"Current"})]}),a>0&&r.jsx("div",{className:"pb-1",children:(0,r.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["-",a,"%"]})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider mb-3",children:"Congestion Index"}),(0,r.jsxs)("div",{className:"flex items-end gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-amber-500",children:i}),r.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:"Before"})]}),r.jsx("div",{className:"text-gray-300 text-lg pb-1",children:"→"}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l}),r.jsx("div",{className:"text-[10px] text-gray-400 mt-1",children:"Current"})]})]})]})]})]})}var m=s(80805),u=s(58565),g=s(28438),h=s(94563);function p(){let{liveState:e,loading:t,error:s,lastValidation:l}=(0,a.i)(),o=(0,n.useMemo)(()=>{if(!e)return null;let t=(0,g.Je)(e);return(0,g.ci)(e,l,t)},[e,l]),p=(0,n.useMemo)(()=>e?(0,g.Ot)(e):[],[e]),b=(0,n.useMemo)(()=>e?(0,g.aD)(e):[],[e]),v=(0,n.useMemo)(()=>e?(0,g.$A)(e):[],[e]);return t?r.jsx(m.IZ,{}):!s&&e&&o?(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[r.jsx(i.Z,{title:"Executive Command Brief",snapshotId:e.snapshot_id,timestamp:e.timestamp}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[r.jsx(d,{label:"District Risk",value:o.districtRiskIndex,subtitle:"Risk index (0–100)",governanceStatus:o.governanceStatus}),r.jsx(d,{label:"High-Risk Window",value:o.forecastedHighRiskWindow,subtitle:`Peak: ${o.forecastedHighRiskValue}%`}),r.jsx(d,{label:"Interventions",value:o.interventionsAppliedToday,subtitle:"Applied today"}),r.jsx(d,{label:"Effectiveness",value:`${o.effectiveness}%`,subtitle:"Avg risk reduction"}),r.jsx(d,{label:"Governance",value:o.governanceStatus,governanceStatus:o.governanceStatus}),r.jsx(d,{label:"Active Alerts",value:e.active_alerts,subtitle:`${e.zones.length} zones monitored`})]}),r.jsx(c,{entries:p}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Emerging Risks"}),0===b.length?r.jsx("p",{className:"text-sm text-gray-400",children:"No emerging risks detected"}):r.jsx("div",{className:"space-y-3",children:b.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-50 last:border-0",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.zoneName}),(0,r.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["peaks at ",e.peakTime]})]}),(0,r.jsxs)("span",{className:`text-sm font-bold ${e.peakRisk>=.7?"text-red-600":e.peakRisk>=.4?"text-amber-600":"text-green-600"}`,children:[Math.round(100*e.peakRisk),"%"]})]},e.zone_id))})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Active Mitigations"}),0===v.length?r.jsx("p",{className:"text-sm text-gray-400",children:"No active mitigations"}):r.jsx("div",{className:"space-y-3",children:v.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start justify-between py-2 border-b border-gray-50 last:border-0",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900 block truncate",children:e.action}),(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:[e.zoneName," — ",e.appliedAt]})]}),r.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-0.5 rounded-full shrink-0 ml-2",children:"Active"})]},`${e.zone_id}-${t}`))})]})]}),r.jsx(x,{liveState:e}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>(0,h.M)(o),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:"Export Summary JSON"})})]})]}):r.jsx(u.Z,{message:s??"Demo Data Unavailable"})}},58565:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(10326),n=s(90434);function a({message:e="Demo Data Unavailable",backHref:t,backLabel:s="Go Back"}){return r.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 flex items-center justify-center mx-auto mb-3",children:r.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{className:"text-sm text-red-500 mb-2",children:e}),t&&r.jsx(n.default,{href:t,className:"text-sm text-blue-600 hover:underline",children:s})]})})}},80805:(e,t,s)=>{"use strict";s.d(t,{IZ:()=>n});var r=s(10326);function n(){return r.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-sm text-gray-400",children:"Loading..."})]})})}},83036:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(10326),n=s(55374);let a={normal:"Normal",surge:"Surge",weather:"Weather",dismissal:"Dismissal"};function i({snapshotId:e,timestamp:t,title:s="Operations Console"}){let{config:i,updateConfig:l}=(0,n.c)(),d=t?function(e){let t=new Date(e),s=String(t.getUTCHours()).padStart(2,"0"),r=String(t.getUTCMinutes()).padStart(2,"0"),n=String(t.getUTCSeconds()).padStart(2,"0");return`${s}:${r}:${n} UTC`}(t):"--:--:--";return(0,r.jsxs)("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("h1",{className:"text-sm font-semibold text-gray-900",children:s}),e&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"text-xs text-gray-400",children:"|"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Snapshot: ",e]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("select",{value:i.scenario,onChange:e=>l({scenario:e.target.value}),className:"text-xs border border-gray-200 rounded-md px-2 py-1 text-gray-600 bg-white",children:Object.keys(a).map(e=>r.jsx("option",{value:e,children:a[e]},e))}),r.jsx("button",{onClick:()=>l({timeMode:"live"===i.timeMode?"paused":"live"}),className:`flex items-center gap-1.5 text-xs px-2 py-1 rounded-md border ${"live"===i.timeMode?"border-green-200 bg-green-50 text-green-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:"live"===i.timeMode?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"relative flex h-2 w-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),"Live"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"inline-flex rounded-full h-2 w-2 bg-amber-500"}),"Paused"]})}),r.jsx("span",{className:"text-xs font-mono text-gray-600",children:d})]})]})}},94563:(e,t,s)=>{"use strict";function r(e,t){let s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}function n(e){r(e,`${e.incident_id}.json`)}function a(e){r({generated_at:new Date().toISOString(),district_risk_index:e.districtRiskIndex,forecasted_high_risk_window:e.forecastedHighRiskWindow,forecasted_high_risk_value:e.forecastedHighRiskValue,interventions_applied_today:e.interventionsAppliedToday,effectiveness_pct:e.effectiveness,governance_status:e.governanceStatus},`executive-summary-${Date.now()}.json`)}s.d(t,{M:()=>a,j:()=>n})},28438:(e,t,s)=>{"use strict";s.d(t,{$A:()=>l,Je:()=>d,Ot:()=>a,aD:()=>i,ci:()=>n});var r=s(2545);function n(e,t,s){var n;let a=e.zones,i=a.map(e=>e.risk_score).sort((e,t)=>t-e),l=i.slice(0,Math.max(3,Math.ceil(i.length/2))),d=l.length>0?Math.round(l.reduce((e,t)=>e+t,0)/l.length*100):0,o=0,c="";for(let e of a)for(let t of e.forecast_30m)t.risk>o&&(o=t.risk,c=t.time);let x=c?`~${c}`:"N/A",m=Math.round(100*o);return{districtRiskIndex:d,forecastedHighRiskWindow:x,forecastedHighRiskValue:m,interventionsAppliedToday:a.reduce((e,t)=>e+t.interventions.length,0),effectiveness:function(e){let t=0,s=0;for(let r of e)0!==r.interventions.length&&(s++,t+=Math.min(.12*r.interventions.length,.4));return 0===s?0:Math.round(t/s*100)}(a),governanceStatus:(n=(0,r.Kt)().fetchErrorCount,t&&t.valid&&"DRIFT"!==s&&!(n>5)?t.warnings.length>0||"WARNING"===s||n>2?"AMBER":"GREEN":"RED")}}function a(e){return e.zones.map(e=>{let t=e.forecast_30m;return{zone_id:e.zone_id,name:e.name,riskNow:Math.round(100*e.risk_score),risk15:t.length>=4?Math.round(100*t[3].risk):Math.round(100*e.risk_score),risk30:t.length>=7?Math.round(100*t[6].risk):Math.round(100*e.risk_score),risk_level:e.risk_level}})}function i(e){return e.zones.map(e=>{let t=0,s="";for(let r of e.forecast_30m)r.risk>t&&(t=r.risk,s=r.time);return{zone_id:e.zone_id,zoneName:e.name,peakRisk:t,peakTime:s}}).sort((e,t)=>t.peakRisk-e.peakRisk).slice(0,3)}function l(e){let t=[];for(let s of e.zones)for(let e of s.interventions)t.push({zone_id:s.zone_id,zoneName:s.name,action:e.action,appliedAt:e.applied_at});return t.slice(0,3)}function d(e){let t=e.camera_health_pct>=90,s=e.avg_latency_ms<=200,r=e.zones.every(e=>e.forecast_30m.length>0);return t||s?t&&s&&r?"NORMAL":"WARNING":"DRIFT"}},64780:(e,t,s)=>{"use strict";s.d(t,{i:()=>r.j});var r=s(69638)},72946:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/app/executive/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[335,513],()=>s(84542));module.exports=r})();