(()=>{var e={};e.id=113,e.ids=[113],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5549:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(19254),s(37698),s(35866);var t=s(23191),a=s(88716),n=s(37922),l=s.n(n),i=s(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(r,o);let c=["",{children:["governance",{children:["controls",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,19254)),"/Users/dc/Documents/projects/schoolzone/app/governance/controls/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,37698)),"/Users/dc/Documents/projects/schoolzone/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/dc/Documents/projects/schoolzone/app/governance/controls/page.tsx"],m="/governance/controls/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/governance/controls/page",pathname:"/governance/controls",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},15191:(e,r,s)=>{Promise.resolve().then(s.bind(s,89089))},89089:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>x});var t=s(10326),a=s(17577),n=s(64780),l=s(28438),i=s(2545),o=s(29771),c=s(83036),d=s(80805),m=s(58565);function x(){let{liveState:e,loading:r,error:s,lastValidation:x}=(0,n.i)(),p=(0,a.useMemo)(()=>e?(0,l.Je)(e):"NORMAL",[e]),u=(0,i.Kt)(),h=(0,o.AF)().slice(-20).reverse();if(r)return t.jsx(d.IZ,{});if(s||!e)return t.jsx(m.Z,{message:s??"Demo Data Unavailable"});let g="NORMAL"===p?"text-green-700 bg-green-50 border-green-200":"WARNING"===p?"text-amber-700 bg-amber-50 border-amber-200":"text-red-700 bg-red-50 border-red-200";return(0,t.jsxs)("div",{className:"flex flex-col h-screen",children:[t.jsx(c.Z,{title:"Governance — Controls",snapshotId:e.snapshot_id,timestamp:e.timestamp}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Controls & Compliance"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:`border rounded-lg p-4 ${g}`,children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider mb-1",children:"Model Drift"}),t.jsx("p",{className:"text-2xl font-bold",children:p}),t.jsx("p",{className:"text-xs mt-1 opacity-80",children:"NORMAL"===p?"All systems within parameters":"WARNING"===p?"Some parameters approaching thresholds":"Parameters outside acceptable range"})]}),(0,t.jsxs)("div",{className:`border rounded-lg p-4 ${x?.valid!==!1?"text-green-700 bg-green-50 border-green-200":"text-red-700 bg-red-50 border-red-200"}`,children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider mb-1",children:"Validation"}),t.jsx("p",{className:"text-2xl font-bold",children:x?.valid!==!1?"PASS":"FAIL"}),(0,t.jsxs)("p",{className:"text-xs mt-1 opacity-80",children:[x?.errors.length??0," errors, ",x?.warnings.length??0," warnings"]})]}),(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-1",children:"Pipeline Health"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:0===u.fetchErrorCount?"OK":`${u.fetchErrorCount} errors`}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u.fetchCount," fetches, ",u.snapshotRotations," rotations"]})]})]}),x&&!x.valid&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-5",children:[t.jsx("h3",{className:"text-sm font-semibold text-red-800 mb-3",children:"Validation Errors"}),t.jsx("ul",{className:"space-y-1",children:x.errors.map((e,r)=>(0,t.jsxs)("li",{className:"text-sm text-red-700 flex items-start gap-2",children:[t.jsx("span",{className:"text-red-400 shrink-0",children:"•"}),e]},r))})]}),x&&x.warnings.length>0&&(0,t.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-5",children:[t.jsx("h3",{className:"text-sm font-semibold text-amber-800 mb-3",children:"Warnings"}),t.jsx("ul",{className:"space-y-1",children:x.warnings.map((e,r)=>(0,t.jsxs)("li",{className:"text-sm text-amber-700 flex items-start gap-2",children:[t.jsx("span",{className:"text-amber-400 shrink-0",children:"•"}),e]},r))})]}),(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Appendix A — Contract Compliance"}),t.jsx("div",{className:"space-y-2",children:[{rule:"No backend / API routes",compliant:!0},{rule:"Static JSON under /public/mock/",compliant:!0},{rule:"Snapshot rotation via polling",compliant:!0},{rule:"Demo mutations in-memory only",compliant:!0},{rule:"No external network calls",compliant:!0},{rule:"No server actions",compliant:!0},{rule:"Runtime validation enabled",compliant:0===u.validationFailures}].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2.5 py-1.5",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${e.compliant?"bg-green-500":"bg-red-500"}`}),t.jsx("span",{className:"text-sm text-gray-700",children:e.rule})]},e.rule))})]}),(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Audit Log (Recent)"}),0===h.length?t.jsx("p",{className:"text-sm text-gray-400",children:"No log entries"}):t.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:h.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 py-1.5 text-xs border-b border-gray-50 last:border-0",children:[t.jsx("span",{className:"font-mono text-gray-400 shrink-0 w-20 truncate",children:e.timestamp.slice(11,19)}),t.jsx("span",{className:`font-semibold uppercase shrink-0 w-12 ${"error"===e.level?"text-red-600":"warn"===e.level?"text-amber-600":"info"===e.level?"text-blue-600":"text-gray-400"}`,children:e.level}),t.jsx("span",{className:"text-gray-700 truncate",children:e.message})]},r))})]})]})]})}},58565:(e,r,s)=>{"use strict";s.d(r,{Z:()=>n});var t=s(10326),a=s(90434);function n({message:e="Demo Data Unavailable",backHref:r,backLabel:s="Go Back"}){return t.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-red-50 flex items-center justify-center mx-auto mb-3",children:t.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),t.jsx("p",{className:"text-sm text-red-500 mb-2",children:e}),r&&t.jsx(a.default,{href:r,className:"text-sm text-blue-600 hover:underline",children:s})]})})}},80805:(e,r,s)=>{"use strict";s.d(r,{IZ:()=>a});var t=s(10326);function a(){return t.jsx("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),t.jsx("span",{className:"text-sm text-gray-400",children:"Loading..."})]})})}},83036:(e,r,s)=>{"use strict";s.d(r,{Z:()=>l});var t=s(10326),a=s(55374);let n={normal:"Normal",surge:"Surge",weather:"Weather",dismissal:"Dismissal"};function l({snapshotId:e,timestamp:r,title:s="Operations Console"}){let{config:l,updateConfig:i}=(0,a.c)(),o=r?function(e){let r=new Date(e),s=String(r.getUTCHours()).padStart(2,"0"),t=String(r.getUTCMinutes()).padStart(2,"0"),a=String(r.getUTCSeconds()).padStart(2,"0");return`${s}:${t}:${a} UTC`}(r):"--:--:--";return(0,t.jsxs)("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-sm font-semibold text-gray-900",children:s}),e&&(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"text-xs text-gray-400",children:"|"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Snapshot: ",e]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("select",{value:l.scenario,onChange:e=>i({scenario:e.target.value}),className:"text-xs border border-gray-200 rounded-md px-2 py-1 text-gray-600 bg-white",children:Object.keys(n).map(e=>t.jsx("option",{value:e,children:n[e]},e))}),t.jsx("button",{onClick:()=>i({timeMode:"live"===l.timeMode?"paused":"live"}),className:`flex items-center gap-1.5 text-xs px-2 py-1 rounded-md border ${"live"===l.timeMode?"border-green-200 bg-green-50 text-green-700":"border-amber-200 bg-amber-50 text-amber-700"}`,children:"live"===l.timeMode?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"relative flex h-2 w-2",children:[t.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),t.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),"Live"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("span",{className:"inline-flex rounded-full h-2 w-2 bg-amber-500"}),"Paused"]})}),t.jsx("span",{className:"text-xs font-mono text-gray-600",children:o})]})]})}},28438:(e,r,s)=>{"use strict";s.d(r,{$A:()=>i,Je:()=>o,Ot:()=>n,aD:()=>l,ci:()=>a});var t=s(2545);function a(e,r,s){var a;let n=e.zones,l=n.map(e=>e.risk_score).sort((e,r)=>r-e),i=l.slice(0,Math.max(3,Math.ceil(l.length/2))),o=i.length>0?Math.round(i.reduce((e,r)=>e+r,0)/i.length*100):0,c=0,d="";for(let e of n)for(let r of e.forecast_30m)r.risk>c&&(c=r.risk,d=r.time);let m=d?`~${d}`:"N/A",x=Math.round(100*c);return{districtRiskIndex:o,forecastedHighRiskWindow:m,forecastedHighRiskValue:x,interventionsAppliedToday:n.reduce((e,r)=>e+r.interventions.length,0),effectiveness:function(e){let r=0,s=0;for(let t of e)0!==t.interventions.length&&(s++,r+=Math.min(.12*t.interventions.length,.4));return 0===s?0:Math.round(r/s*100)}(n),governanceStatus:(a=(0,t.Kt)().fetchErrorCount,r&&r.valid&&"DRIFT"!==s&&!(a>5)?r.warnings.length>0||"WARNING"===s||a>2?"AMBER":"GREEN":"RED")}}function n(e){return e.zones.map(e=>{let r=e.forecast_30m;return{zone_id:e.zone_id,name:e.name,riskNow:Math.round(100*e.risk_score),risk15:r.length>=4?Math.round(100*r[3].risk):Math.round(100*e.risk_score),risk30:r.length>=7?Math.round(100*r[6].risk):Math.round(100*e.risk_score),risk_level:e.risk_level}})}function l(e){return e.zones.map(e=>{let r=0,s="";for(let t of e.forecast_30m)t.risk>r&&(r=t.risk,s=t.time);return{zone_id:e.zone_id,zoneName:e.name,peakRisk:r,peakTime:s}}).sort((e,r)=>r.peakRisk-e.peakRisk).slice(0,3)}function i(e){let r=[];for(let s of e.zones)for(let e of s.interventions)r.push({zone_id:s.zone_id,zoneName:s.name,action:e.action,appliedAt:e.applied_at});return r.slice(0,3)}function o(e){let r=e.camera_health_pct>=90,s=e.avg_latency_ms<=200,t=e.zones.every(e=>e.forecast_30m.length>0);return r||s?r&&s&&t?"NORMAL":"WARNING":"DRIFT"}},64780:(e,r,s)=>{"use strict";s.d(r,{i:()=>t.j});var t=s(69638)},19254:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/Users/dc/Documents/projects/schoolzone/app/governance/controls/page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[335,513],()=>s(5549));module.exports=t})();