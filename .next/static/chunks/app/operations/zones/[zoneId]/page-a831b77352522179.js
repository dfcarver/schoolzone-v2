(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{12305:function(e,t,s){Promise.resolve().then(s.bind(s,13278))},13278:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(57437),r=s(2265),i=s(99376),n=s(27648),l=s(97871),c=s(3985),d=s(91591),o=s(4272),x=s(47625),m=s(93765),h=s(31699),p=s(97059),f=s(62994),b=s(25311),g=(0,m.z)({chartName:"BarChart",GraphicalChild:h.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:p.K},{axisType:"yAxis",AxisComp:f.B}],formatAxisMap:b.t9}),u=s(56940),j=s(8147),y=s(20407);let N=[{time:"13:00",risk:.15},{time:"13:15",risk:.2},{time:"13:30",risk:.25},{time:"13:45",risk:.35},{time:"14:00",risk:.55},{time:"14:15",risk:.7},{time:"14:30",risk:.82},{time:"14:45",risk:.75},{time:"15:00",risk:.6}];function v(e){let{zoneName:t}=e,s=N.map(e=>({...e,riskPct:Math.round(100*e.risk)}));return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:["Risk Timeline ",t?"— ".concat(t):""]}),(0,a.jsx)("div",{className:"h-48",children:(0,a.jsx)(x.h,{width:"100%",height:"100%",children:(0,a.jsxs)(g,{data:s,children:[(0,a.jsx)(u.q,{strokeDasharray:"3 3",stroke:"#f0f0f0",vertical:!1}),(0,a.jsx)(p.K,{dataKey:"time",tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#e5e7eb"}}),(0,a.jsx)(f.B,{domain:[0,100],tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#e5e7eb"},tickFormatter:e=>"".concat(e,"%")}),(0,a.jsx)(j.u,{contentStyle:{fontSize:12,borderRadius:8,border:"1px solid #e5e7eb"},formatter:e=>["".concat(e,"%"),"Risk"]}),(0,a.jsx)(h.$,{dataKey:"riskPct",radius:[4,4,0,0],children:s.map((e,t)=>{var s;return(0,a.jsx)(y.b,{fill:(s=e.risk)>=.6?"#ef4444":s>=.4?"#f59e0b":"#22c55e"},t)})})]})})})]})}let k={LOW:"bg-green-100 text-green-700",MED:"bg-amber-100 text-amber-700",HIGH:"bg-red-100 text-red-700"};function w(e){let{recommendation:t,onApply:s}=e;return(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(k[t.priority]),children:t.priority}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["Confidence: ",(100*t.confidence).toFixed(0),"%"]})]}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:t.action}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.impact})]}),s&&(0,a.jsx)("button",{onClick:()=>s(t.id),className:"shrink-0 px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 transition-colors",children:"Apply (Demo)"})]})})}var _=s(88581),C=s(70279),D=s(65174);let A={[c.rN.LOW]:"bg-green-100 text-green-700",[c.rN.MED]:"bg-amber-100 text-amber-700",[c.rN.HIGH]:"bg-red-100 text-red-700"};function S(){let e=(0,i.useParams)().zoneId,{liveState:t,loading:s,error:c,applyDemo:x}=(0,l.i)(),m=(0,r.useMemo)(()=>{var s;return null!==(s=null==t?void 0:t.zones.find(t=>t.zone_id===e))&&void 0!==s?s:null},[t,e]),h=(0,r.useCallback)(t=>{let s=null==m?void 0:m.recommendations.find(e=>e.id===t);s&&x(e,s)},[m,e,x]);return s?(0,a.jsx)(C.IZ,{}):c||!t?(0,a.jsx)(D.Z,{message:null!=c?c:"Demo Data Unavailable",backHref:"/operations/dashboard",backLabel:"Back to Dashboard"}):m?(0,a.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,a.jsx)(d.Z,{title:"Zone Operations",snapshotId:t.snapshot_id,timestamp:t.timestamp}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.default,{href:"/operations/dashboard",className:"text-sm text-gray-400 hover:text-gray-600",children:"Dashboard"}),(0,a.jsx)("span",{className:"text-gray-300",children:"/"}),(0,a.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:m.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:m.name}),(0,a.jsxs)("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full ".concat(A[m.risk_level]),children:[m.risk_level," RISK"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["Score: ",(100*m.risk_score).toFixed(0),"%"]}),(0,a.jsxs)("span",{children:["Speed: ",m.speed_avg_mph," mph"]}),(0,a.jsxs)("span",{children:["Pedestrians: ",m.pedestrian_count]}),(0,a.jsxs)("span",{children:["Cameras: ",m.active_cameras,"/",m.total_cameras]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(v,{zoneName:m.name}),(0,a.jsx)(o.Z,{data:m.forecast_30m,title:"Risk Forecast — ".concat(m.name)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recommendations"}),0===m.recommendations.length?(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No recommendations"}):(0,a.jsx)("div",{className:"space-y-3",children:m.recommendations.map(e=>(0,a.jsx)(w,{recommendation:e,onApply:h},e.id))})]}),(0,a.jsx)(_.Z,{interventions:m.interventions}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Event Log"}),0===m.events.length?(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No events"}):(0,a.jsx)("div",{className:"space-y-2",children:m.events.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 py-2 border-b border-gray-50 last:border-0",children:[(0,a.jsx)("span",{className:"text-xs font-mono text-gray-400 shrink-0 pt-0.5",children:e.time}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase shrink-0 w-24 pt-0.5",children:e.type}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e.detail})]},"".concat(e.time,"-").concat(t)))})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:['Zone "',e,'" not found']}),(0,a.jsx)(n.default,{href:"/operations/dashboard",className:"text-sm text-blue-600 hover:underline",children:"Back to Dashboard"})]})})}},4272:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(57437),r=s(47625),i=s(5019),n=s(56940),l=s(97059),c=s(62994),d=s(8147),o=s(23263),x=s(54061);function m(e){let{data:t,title:s="30-Minute Risk Forecast"}=e;if(!t||0===t.length)return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:s}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No forecast data available"})]});let m=t.map(e=>({...e,riskPct:Math.round(100*e.risk),confPct:Math.round(100*e.confidence)}));return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:s}),(0,a.jsx)("div",{className:"h-56",children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(i.c,{data:m,children:[(0,a.jsx)(n.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(l.K,{dataKey:"time",tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#e5e7eb"}}),(0,a.jsx)(c.B,{domain:[0,100],tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#e5e7eb"},tickFormatter:e=>"".concat(e,"%")}),(0,a.jsx)(d.u,{contentStyle:{fontSize:12,borderRadius:8,border:"1px solid #e5e7eb"},formatter:(e,t)=>["".concat(e,"%"),"riskPct"===t?"Risk":"Confidence"]}),(0,a.jsx)(o.u,{type:"monotone",dataKey:"confPct",fill:"#dbeafe",stroke:"none",fillOpacity:.4}),(0,a.jsx)(x.x,{type:"monotone",dataKey:"riskPct",stroke:"#ef4444",strokeWidth:2,dot:{r:3,fill:"#ef4444"},activeDot:{r:5}}),(0,a.jsx)(x.x,{type:"monotone",dataKey:"confPct",stroke:"#3b82f6",strokeWidth:1.5,strokeDasharray:"4 4",dot:!1})]})})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-0.5 bg-red-500 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Risk"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-0.5 bg-blue-500 rounded border-dashed"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Confidence"})]})]})]})}},88581:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(57437);let r={active:"bg-green-100 text-green-700",en_route:"bg-blue-100 text-blue-700",pending:"bg-gray-100 text-gray-600",completed:"bg-gray-100 text-gray-500"};function i(e){let{interventions:t}=e;return t&&0!==t.length?(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Active Interventions"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"text-left py-2 pr-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"ID"}),(0,a.jsx)("th",{className:"text-left py-2 pr-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Action"}),(0,a.jsx)("th",{className:"text-left py-2 pr-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Applied At"}),(0,a.jsx)("th",{className:"text-left py-2 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Status"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-50 last:border-0",children:[(0,a.jsx)("td",{className:"py-2.5 pr-4 font-mono text-xs text-gray-500",children:e.id}),(0,a.jsx)("td",{className:"py-2.5 pr-4 text-gray-900",children:e.action}),(0,a.jsx)("td",{className:"py-2.5 pr-4 font-mono text-xs text-gray-500",children:e.applied_at}),(0,a.jsx)("td",{className:"py-2.5",children:(0,a.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(r[e.status]||"bg-gray-100 text-gray-600"),children:e.status})})]},e.id))})]})})]}):(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Active Interventions"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No active interventions"})]})}}},function(e){e.O(0,[648,81,382,971,117,744],function(){return e(e.s=12305)}),_N_E=e.O()}]);