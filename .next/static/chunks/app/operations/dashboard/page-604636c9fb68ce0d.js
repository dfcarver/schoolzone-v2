(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{75506:function(e,t,s){Promise.resolve().then(s.bind(s,82179))},82179:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var a=s(57437),r=s(97871),n=s(3985),i=s(91591);let l={normal:"border-gray-200",warning:"border-amber-300",critical:"border-red-400"},c={normal:"bg-green-500",warning:"bg-amber-500",critical:"bg-red-500"};function d(e){let{label:t,value:s,status:r="normal"}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg border ".concat(l[r]," px-5 py-4 flex flex-col gap-1"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(c[r])}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:t})]}),(0,a.jsx)("span",{className:"text-2xl font-semibold text-gray-900",children:s})]})}var o=s(99376);let x={LOW:"border-green-500 bg-green-50",MED:"border-amber-500 bg-amber-50",HIGH:"border-red-500 bg-red-50"},m={LOW:"bg-green-100 text-green-700",MED:"bg-amber-100 text-amber-700",HIGH:"bg-red-100 text-red-700"};function g(e){let{zone:t}=e,s=(0,o.useRouter)();return(0,a.jsxs)("button",{onClick:()=>s.push("/operations/zones/".concat(t.zone_id)),className:"text-left border-l-4 ".concat(x[t.risk_level]," rounded-lg p-4 hover:shadow-md transition-shadow bg-white cursor-pointer w-full"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:t.name}),(0,a.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(m[t.risk_level]),children:t.risk_level})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Risk Score"}),(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[(100*t.risk_score).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Avg Speed"}),(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[t.speed_avg_mph," mph"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Pedestrians"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:t.pedestrian_count})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Cameras"}),(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[t.active_cameras,"/",t.total_cameras]})]})]})]})}var h=s(4272),p=s(88581),u=s(70279),b=s(65174);function f(){var e;let{liveState:t,loading:s,error:l}=(0,r.i)();if(s)return(0,a.jsx)(u.IZ,{});if(l||!t)return(0,a.jsx)(b.Z,{message:null!=l?l:"Demo Data Unavailable"});let c=t.zones.flatMap(e=>e.interventions.map(t=>({...t,zoneName:e.name}))),o=t.zones[0];return(0,a.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,a.jsx)(i.Z,{title:"Operations Dashboard",snapshotId:t.snapshot_id,timestamp:t.timestamp}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,a.jsx)(d,{label:"District Risk",value:t.district_risk,status:(e=t.district_risk)===n.rN.HIGH?"critical":e===n.rN.MED?"warning":"normal"}),(0,a.jsx)(d,{label:"Active Alerts",value:t.active_alerts,status:t.active_alerts>3?"critical":"normal"}),(0,a.jsx)(d,{label:"Avg Latency",value:"".concat(t.avg_latency_ms,"ms"),status:t.avg_latency_ms>150?"warning":"normal"}),(0,a.jsx)(d,{label:"Camera Health",value:"".concat(t.camera_health_pct,"%"),status:t.camera_health_pct<95?"warning":"normal"}),(0,a.jsx)(d,{label:"Forecast Horizon",value:"".concat(t.forecast_horizon_min,"m"),status:"normal"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Zone Overview"}),0===t.zones.length?(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No zones available"}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.zones.map(e=>(0,a.jsx)(g,{zone:e},e.zone_id))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o&&(0,a.jsx)(h.Z,{data:o.forecast_30m,title:"Risk Forecast â€” ".concat(o.name)}),(0,a.jsx)(p.Z,{interventions:c})]})]})]})}},4272:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var a=s(57437),r=s(47625),n=s(5019),i=s(56940),l=s(97059),c=s(62994),d=s(8147),o=s(23263),x=s(54061);function m(e){let{data:t,title:s="30-Minute Risk Forecast"}=e;if(!t||0===t.length)return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:s}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No forecast data available"})]});let m=t.map(e=>({...e,riskPct:Math.round(100*e.risk),confPct:Math.round(100*e.confidence)}));return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:s}),(0,a.jsx)("div",{className:"h-56",children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(n.c,{data:m,children:[(0,a.jsx)(i.q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,a.jsx)(l.K,{dataKey:"time",tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#e5e7eb"}}),(0,a.jsx)(c.B,{domain:[0,100],tick:{fontSize:11,fill:"#9ca3af"},axisLine:{stroke:"#e5e7eb"},tickFormatter:e=>"".concat(e,"%")}),(0,a.jsx)(d.u,{contentStyle:{fontSize:12,borderRadius:8,border:"1px solid #e5e7eb"},formatter:(e,t)=>["".concat(e,"%"),"riskPct"===t?"Risk":"Confidence"]}),(0,a.jsx)(o.u,{type:"monotone",dataKey:"confPct",fill:"#dbeafe",stroke:"none",fillOpacity:.4}),(0,a.jsx)(x.x,{type:"monotone",dataKey:"riskPct",stroke:"#ef4444",strokeWidth:2,dot:{r:3,fill:"#ef4444"},activeDot:{r:5}}),(0,a.jsx)(x.x,{type:"monotone",dataKey:"confPct",stroke:"#3b82f6",strokeWidth:1.5,strokeDasharray:"4 4",dot:!1})]})})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-0.5 bg-red-500 rounded"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Risk"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-3 h-0.5 bg-blue-500 rounded border-dashed"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Confidence"})]})]})]})}},88581:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(57437);let r={active:"bg-green-100 text-green-700",en_route:"bg-blue-100 text-blue-700",pending:"bg-gray-100 text-gray-600",completed:"bg-gray-100 text-gray-500"};function n(e){let{interventions:t}=e;return t&&0!==t.length?(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Active Interventions"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("th",{className:"text-left py-2 pr-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"ID"}),(0,a.jsx)("th",{className:"text-left py-2 pr-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Action"}),(0,a.jsx)("th",{className:"text-left py-2 pr-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Applied At"}),(0,a.jsx)("th",{className:"text-left py-2 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Status"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-50 last:border-0",children:[(0,a.jsx)("td",{className:"py-2.5 pr-4 font-mono text-xs text-gray-500",children:e.id}),(0,a.jsx)("td",{className:"py-2.5 pr-4 text-gray-900",children:e.action}),(0,a.jsx)("td",{className:"py-2.5 pr-4 font-mono text-xs text-gray-500",children:e.applied_at}),(0,a.jsx)("td",{className:"py-2.5",children:(0,a.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(r[e.status]||"bg-gray-100 text-gray-600"),children:e.status})})]},e.id))})]})})]}):(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Active Interventions"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No active interventions"})]})}}},function(e){e.O(0,[648,81,382,971,117,744],function(){return e(e.s=75506)}),_N_E=e.O()}]);