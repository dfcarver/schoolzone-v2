(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{72538:function(e,t,a){Promise.resolve().then(a.bind(a,7210))},7210:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var s=a(57437),r=a(2265),n=a(97871),l=a(91591),i=a(83639);function c(e){let{liveState:t}=e,a=(0,i.Kt)(),r=t.camera_health_pct>=95,n=t.avg_latency_ms<=150,l=0===a.fetchErrorCount,c=[{label:"Camera Network",value:"".concat(t.camera_health_pct,"%"),ok:r,detail:r?"All cameras healthy":"Degraded camera coverage"},{label:"Inference Latency",value:"".concat(t.avg_latency_ms,"ms"),ok:n,detail:n?"Within threshold":"Above 150ms threshold"},{label:"Data Pipeline",value:l?"OK":"".concat(a.fetchErrorCount," errors"),ok:l,detail:"".concat(a.fetchCount," fetches, ").concat(a.snapshotRotations," rotations")},{label:"Demo Mutations",value:String(a.demoMutationsApplied),ok:!0,detail:"In-memory only â€” resets on refresh"},{label:"Validation",value:0===a.validationFailures?"Pass":"".concat(a.validationFailures," failures"),ok:0===a.validationFailures,detail:0===a.validationFailures?"All snapshots valid":"Schema validation issues detected"}];return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"System Health"}),(0,s.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-50 last:border-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(e.ok?"bg-green-500":"bg-red-500")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,s.jsx)("span",{className:"text-xs text-gray-400 ml-2",children:e.detail})]})]}),(0,s.jsx)("span",{className:"text-sm font-mono ".concat(e.ok?"text-gray-600":"text-red-600 font-semibold"),children:e.value})]},e.label))})]})}var o=a(70279),d=a(65174);let x={HIGH:0,MED:1,LOW:2},m={HIGH:"bg-red-100 text-red-700",MED:"bg-amber-100 text-amber-700",LOW:"bg-green-100 text-green-700"};function h(){let{liveState:e,loading:t,error:a}=(0,n.i)(),i=(0,r.useMemo)(()=>{if(!e)return[];let t=[];for(let a of e.zones)for(let e of a.recommendations)t.push({zone_id:a.zone_id,zoneName:a.name,action:e.action,priority:e.priority,confidence:e.confidence,impact:e.impact});return t.sort((e,t)=>{var a,s;return(null!==(a=x[e.priority])&&void 0!==a?a:9)-(null!==(s=x[t.priority])&&void 0!==s?s:9)||t.confidence-e.confidence})},[e]);return t?(0,s.jsx)(o.IZ,{}):a||!e?(0,s.jsx)(d.Z,{message:null!=a?a:"Demo Data Unavailable"}):(0,s.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,s.jsx)(l.Z,{title:"Work Queue",snapshotId:e.snapshot_id,timestamp:e.timestamp}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Recommendation Queue"}),(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:[i.length," pending item",1!==i.length?"s":""]})]}),(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-100 bg-gray-50",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Priority"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Zone"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Action"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Impact"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Confidence"})]})}),(0,s.jsx)("tbody",{children:0===i.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"py-8 text-center text-gray-400",children:"No pending recommendations"})}):i.map((e,t)=>{var a;return(0,s.jsxs)("tr",{className:"border-b border-gray-50 last:border-0 hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(null!==(a=m[e.priority])&&void 0!==a?a:"bg-gray-100 text-gray-600"),children:e.priority})}),(0,s.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.zoneName}),(0,s.jsx)("td",{className:"py-3 px-4 text-gray-900 font-medium max-w-xs truncate",children:e.action}),(0,s.jsx)("td",{className:"py-3 px-4 text-gray-500 max-w-xs truncate",children:e.impact}),(0,s.jsxs)("td",{className:"py-3 px-4 text-right font-mono text-gray-600",children:[Math.round(100*e.confidence),"%"]})]},"".concat(e.zone_id,"-").concat(t))})})]})}),(0,s.jsx)(c,{liveState:e})]})]})}}},function(e){e.O(0,[648,382,971,117,744],function(){return e(e.s=72538)}),_N_E=e.O()}]);