(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{64306:function(e,t,n){Promise.resolve().then(n.bind(n,84937))},84937:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(57437),a=n(2265),s=n(99376),i=n(72510),c=n(65056),o=n(91591),l=n(70279),u=n(65174);let d={LOW:"bg-green-100 text-green-700",MED:"bg-amber-100 text-amber-700",HIGH:"bg-red-100 text-red-700"},x={investigating:"bg-red-50 text-red-600",monitoring:"bg-amber-50 text-amber-600",resolved:"bg-green-50 text-green-600"};function m(){let e=(0,s.useRouter)(),{config:t}=(0,c.c)(),[n,m]=(0,a.useState)([]),[f,h]=(0,a.useState)(!0),[p,g]=(0,a.useState)(null),[v,j]=(0,a.useState)(""),[b,y]=(0,a.useState)("");if((0,a.useEffect)(()=>{let e=!1;return h(!0),(0,i.uq)(t.scenario).then(t=>{e||(m(t.data),g(t.error),h(!1))}),()=>{e=!0}},[t.scenario]),f)return(0,r.jsx)(l.IZ,{});if(p)return(0,r.jsx)(u.Z,{message:p});let N=Array.from(new Set(n.map(e=>e.zone_name))),w=n.filter(e=>(!v||e.zone_name===v)&&(!b||e.severity===b));return(0,r.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,r.jsx)(o.Z,{title:"Governance â€” Incidents"}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Incidents"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"text-sm border border-gray-200 rounded-lg px-3 py-1.5 text-gray-700 bg-white",children:[(0,r.jsx)("option",{value:"",children:"All Zones"}),N.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"text-sm border border-gray-200 rounded-lg px-3 py-1.5 text-gray-700 bg-white",children:[(0,r.jsx)("option",{value:"",children:"All Severities"}),(0,r.jsx)("option",{value:"LOW",children:"LOW"}),(0,r.jsx)("option",{value:"MED",children:"MED"}),(0,r.jsx)("option",{value:"HIGH",children:"HIGH"})]})]})]}),(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-100 bg-gray-50",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Title"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Zone"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Severity"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Status"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Reported"})]})}),(0,r.jsx)("tbody",{children:0===w.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"py-8 text-center text-gray-400",children:"No incidents match the current filters"})}):w.map(t=>(0,r.jsxs)("tr",{onClick:()=>e.push("/governance/incidents/".concat(t.incident_id)),className:"border-b border-gray-50 last:border-0 hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,r.jsx)("td",{className:"py-3 px-4 font-mono text-xs text-gray-500",children:t.incident_id}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-900 font-medium max-w-xs truncate",children:t.title}),(0,r.jsx)("td",{className:"py-3 px-4 text-gray-600",children:t.zone_name}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(d[t.severity]||""),children:t.severity})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full ".concat(x[t.status]||"bg-gray-100 text-gray-600"),children:t.status})}),(0,r.jsx)("td",{className:"py-3 px-4 text-xs text-gray-500",children:function(e){let t=new Date(e),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getUTCMonth()],r=t.getUTCDate(),a=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0");return"".concat(n," ").concat(r,", ").concat(a,":").concat(s)}(t.reported_at)})]},t.incident_id))})]})})]})]})}},65174:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(57437),a=n(27648);function s(e){let{message:t="Demo Data Unavailable",backHref:n,backLabel:s="Go Back"}=e;return(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-red-50 flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("p",{className:"text-sm text-red-500 mb-2",children:t}),n&&(0,r.jsx)(a.default,{href:n,className:"text-sm text-blue-600 hover:underline",children:s})]})})}},70279:function(e,t,n){"use strict";n.d(t,{IZ:function(){return a}});var r=n(57437);function a(){return(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Loading..."})]})})}},91591:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(57437),a=n(65056);let s={normal:"Normal",surge:"Surge",weather:"Weather",dismissal:"Dismissal"};function i(e){let{snapshotId:t,timestamp:n,title:i="Operations Console"}=e,{config:c,updateConfig:o}=(0,a.c)(),l=n?function(e){let t=new Date(e),n=String(t.getUTCHours()).padStart(2,"0"),r=String(t.getUTCMinutes()).padStart(2,"0"),a=String(t.getUTCSeconds()).padStart(2,"0");return"".concat(n,":").concat(r,":").concat(a," UTC")}(n):"--:--:--";return(0,r.jsxs)("header",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-6 shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("h1",{className:"text-sm font-semibold text-gray-900",children:i}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"|"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Snapshot: ",t]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("select",{value:c.scenario,onChange:e=>o({scenario:e.target.value}),className:"text-xs border border-gray-200 rounded-md px-2 py-1 text-gray-600 bg-white",children:Object.keys(s).map(e=>(0,r.jsx)("option",{value:e,children:s[e]},e))}),(0,r.jsx)("button",{onClick:()=>o({timeMode:"live"===c.timeMode?"paused":"live"}),className:"flex items-center gap-1.5 text-xs px-2 py-1 rounded-md border ".concat("live"===c.timeMode?"border-green-200 bg-green-50 text-green-700":"border-amber-200 bg-amber-50 text-amber-700"),children:"live"===c.timeMode?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]}),"Live"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"inline-flex rounded-full h-2 w-2 bg-amber-500"}),"Paused"]})}),(0,r.jsx)("span",{className:"text-xs font-mono text-gray-600",children:l})]})]})}},72510:function(e,t,n){"use strict";n.d(t,{SE:function(){return i},uq:function(){return c}});var r=n(65056),a=n(21212),s=n(83639);async function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",n=arguments.length>2?arguments[2]:void 0,i=performance.now();try{let c=await fetch("".concat((0,r.f)(t),"/").concat(e),{signal:n});if(!c.ok)throw Error("Failed to load live state: ".concat(c.status));let o=await c.json();return(0,s._h)(performance.now()-i,!0),a.um("Loaded snapshot ".concat(e," (").concat(t,")")),o}catch(e){return"AbortError"!==e.name&&(a.vU("loadLiveState failed",e),(0,s._h)(performance.now()-i,!1)),null}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",t=arguments.length>1?arguments[1]:void 0,n=performance.now();try{let a=await fetch("".concat((0,r.f)(e),"/incidents.json"),{signal:t});if(!a.ok)throw Error("Failed to load incidents: ".concat(a.status));let i=await a.json();return(0,s._h)(performance.now()-n,!0),{data:i,error:null}}catch(e){return"AbortError"!==e.name&&(a.vU("loadIncidents failed",e),(0,s._h)(performance.now()-n,!1)),{data:[],error:"Demo Data Unavailable"}}}},65056:function(e,t,n){"use strict";n.d(t,{DemoConfigProvider:function(){return l},c:function(){return o},f:function(){return u}});var r=n(57437),a=n(2265);let s={scenario:"normal",snapshotIntervalMs:5e3,timeMode:"live",demoMutationEnabled:!0,runtimeValidationEnabled:!0},i="schoolzone-demo-config",c=(0,a.createContext)({config:s,updateConfig:()=>{}});function o(){return(0,a.useContext)(c)}function l(e){let{children:t}=e,[n,o]=(0,a.useState)(s);(0,a.useEffect)(()=>{o(function(){try{let e=localStorage.getItem(i);if(!e)return s;let t=JSON.parse(e);return{...s,...t}}catch(e){return s}}())},[]);let l=(0,a.useCallback)(e=>{o(t=>{let n={...t,...e};return!function(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(e){}}(n),n})},[]);return(0,r.jsx)(c.Provider,{value:{config:n,updateConfig:l},children:t})}function u(e){return"/mock/scenarios/".concat(e)}},21212:function(e,t,n){"use strict";n.d(t,{AF:function(){return l},ZK:function(){return c},um:function(){return i},vU:function(){return o}});let r=[];function a(){return new Date().toISOString()}function s(e){r.push(e),r.length>200&&r.shift()}function i(e,t){s({level:"info",timestamp:a(),message:e,data:t})}function c(e,t){s({level:"warn",timestamp:a(),message:e,data:t})}function o(e,t){s({level:"error",timestamp:a(),message:e,data:t})}function l(){return r}},83639:function(e,t,n){"use strict";n.d(t,{Kt:function(){return o},L8:function(){return i},_h:function(){return a},sv:function(){return c},vP:function(){return s}});let r={fetchCount:0,fetchErrorCount:0,lastFetchMs:0,lastFetchAt:null,snapshotRotations:0,demoMutationsApplied:0,validationFailures:0};function a(e,t){r.fetchCount++,r.lastFetchMs=e,r.lastFetchAt=new Date().toISOString(),!t&&r.fetchErrorCount++}function s(){r.snapshotRotations++}function i(){r.demoMutationsApplied++}function c(){r.validationFailures++}function o(){return{...r}}},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=64306)}),_N_E=e.O()}]);